{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["ReactCameraControl","this","props","video","audio","navigator","mediaDevices","stream","sleep","videoTrack","play","name","ms","Promise","resolve","window","state","e","capabilities","advanced","zoom","Number","settings","hasZoom","style","styles","ref","React","Component","PropTypes","element","App","takePicture","a","async","camera","capture","blob","img","src","URL","createObjectURL","onload","revokeObjectURL","cam","captureContainer","onClick","captureButton","captureImage","alt","display","position","justifyContent","zIndex","bottom","width","backgroundColor","borderRadius","height","color","margin","ReactDOM","render","document","getElementById"],"mappings":"+mCAGMA,c,WACJ,G,yEAAmB,I,SAGjB,MAAa,C,WAAA,K,aAAA,K,aAGG,M,+eAKOC,KAAKC,MAArBC,UAAOC,WAEVC,UAAUC,c,yCAEWD,UAAUA,aAAaA,aAAa,CAACF,MAAD,EAAQC,MAA5CC,I,yBACFE,EAAOA,iBAAiBA,G,SAGrCN,KAAKO,MAAM,K,gBACIC,EAAWA,kB,KAEhC,SAAc,C,WAAA,E,sBAKd,kB,UACMR,KAAKE,MAAMO,O,kEAEjB,MAAc,KAAd,Y,KACA,SAAc,C,aACE,KAAEC,O,kCAIC,kE,QACrB,S,KACA,SAAc,C,kMAMNC,EAAKA,UAALA,6CAAK,E,0FACR,IAAIC,SAAQ,SAAAC,G,WAAa,S,6IAIzB,IAAIC,OAAJ,aAAwBd,KAAKe,MAA7B,YAAP,c,0DAGSC,G,8EAC0BhB,KAAKe,MAAjCP,iBACH,SADeS,gBACLA,C,+BACNT,EAAWA,iBAAiB,CAACU,SAAU,CAAC,CAACC,KAAMC,OAAOJ,EAAEA,OAAxDR,W,YACN,SAAc,C,mKAOhB,OAAIR,KAAKe,MAAMP,W,eACb,IAAYR,KAAKe,MAAjB,cAEE,kB,gBACG,oBAA2B,c,MAKGf,KAV9B,MAUCQ,EAVD,aAUaS,EAVb,eAWDI,EAAWb,EAAjB,cACMc,EAAU,SAAhB,E,OAGE,kB,OAAKC,MAAOC,EAAZ,S,KACG,MADH,S,yBAEOD,MAAOC,EAAZ,Q,gCACE,Q,QAAA,E,IAGOF,EAAUL,EAAaA,KAAvBK,IAHP,E,IAIOA,EAAUL,EAAaA,KAAvBK,IAJP,E,KAKQA,EAAUL,EAAaA,KAAvBK,KALR,E,MAMSA,EAAUD,EAAVC,KANT,E,SAOY,SAAAN,G,OAAK,OAALA,O,2BAEPO,MAAOC,EAAd,MAA4BC,IAAK,SAAAvB,G,EAAW,gB,EA1F9CH,CAA2B2B,IAAMC,WAgGvC5B,YAA+B,C,MACtB6B,IADsB,K,MAEtBA,IAFsB,K,SAGnBA,IAAUC,SAGtB9B,eAAkC,C,OAAA,E,OAAA,E,MAAA,G,SAItB,MAGZ,IAAMyB,EAAS,C,QACJ,C,SACG,Y,MAEL,C,MAAA,O,OAEG,Q,OAEF,C,QAAA,O,SAAA,W,eAAA,S,OAAA,E,OAAA,E,MAMC,S,IC1HUM,E,2MACnBC,YAAc,0BAAAC,EAAAC,OAAA,kEAAAD,EAAA,MACO,EAAKE,OAAOC,WADnB,OACNC,EADM,OAEZ,EAAKC,IAAIC,IAAMC,IAAIC,gBAAgBJ,GACnC,EAAKC,IAAII,OAAS,WAChBF,IAAIG,gBAAgB,EAAKJ,MAJf,sC,wEAQJ,IAAD,OACP,OACE,6BACE,kBAAC,EAAD,CAAoBb,IAAK,SAAAkB,GAAS,EAAKT,OAASS,IAC9C,yBAAKpB,MAAOC,EAAOoB,iBAAkBC,QAAS7C,KAAK+B,aACjD,yBAAKR,MAAOC,EAAOsB,kBAGvB,yBACEvB,MAAOC,EAAOuB,aACdtB,IAAK,SAAAY,GAAS,EAAKA,IAAMA,GACzBW,IAAI,U,GApBmBrB,aA0B3BH,EAAS,CACboB,iBAAkB,CAChBK,QAAS,OACTC,SAAU,WACVC,eAAgB,SAChBC,OAAQ,EACRC,OAAQ,EACRC,MAAO,QAETR,cAAe,CACbS,gBAAiB,OACjBC,aAAc,MACdC,OAAQ,GACRH,MAAO,GACPI,MAAO,OACPC,OAAQ,IAEVZ,aAAc,CACZO,MAAO,SC1CXM,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.5c06b3af.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\n\nclass ReactCameraControl extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      videoTrack: null,\n      capabilities: null,\n      errorMessage: null\n    }\n  }\n\n  async componentDidMount() {\n    const {video, audio} = this.props\n\n    if (navigator.mediaDevices) {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({video, audio})\n        const videoTrack = stream.getVideoTracks()[0]\n\n        // Before crbug.com/711524 is fixed, this is needed to retrieve capabilities.\n        await this.sleep(1000)\n        const capabilities = videoTrack.getCapabilities()\n\n        this.setState({\n          videoTrack,\n          capabilities\n        })\n\n        this.video.srcObject = stream\n        await this.video.play()\n      } catch (e) {\n        console.error(e.stackTrace)\n        this.setState({\n          errorMessage: e.name\n        })\n      }\n    } else {\n      const errorMessage = 'Error loading camera. Your browser may not support this feature'\n      console.error(errorMessage)\n      this.setState({\n        errorMessage\n      })\n    }\n  }\n\n  async sleep(ms = 0) {\n    return new Promise(resolve => { setTimeout(resolve, ms) })\n  }\n\n  capture() {\n    return new window.ImageCapture(this.state.videoTrack).takePhoto()\n  }\n\n  async zoom(e) {\n    const {videoTrack, capabilities} = this.state\n    if ('zoom' in capabilities) {\n      await videoTrack.applyConstraints({advanced: [{zoom: Number(e.target.value)}]})\n      this.setState({\n        videoTrack\n      })\n    }\n  }\n\n  render() {\n    if (this.state.videoTrack === null) {\n      console.log(this.state.errorMessage)\n      return (\n        <div>\n          {this.state.errorMessage || 'loading...'}\n        </div>\n      )\n    }\n\n    const { videoTrack, capabilities } = this.state\n    const settings = videoTrack.getSettings()\n    const hasZoom = 'zoom' in capabilities\n\n    return (\n      <div style={styles.preview}>\n        {this.props.children}\n        <div style={styles.slider}>\n          <input\n            type='range'\n            hidden={!hasZoom}\n            min={hasZoom ? capabilities.zoom.min : 0}\n            max={hasZoom ? capabilities.zoom.max : 0}\n            step={hasZoom ? capabilities.zoom.step : 0}\n            value={hasZoom ? settings.zoom : 0}\n            onChange={e => this.zoom(e)} />\n        </div>\n        <video style={styles.video} ref={video => { this.video = video }} />\n      </div>\n    )\n  }\n}\n\nReactCameraControl.propTypes = {\n  audio: PropTypes.bool,\n  video: PropTypes.bool,\n  children: PropTypes.element\n}\n\nReactCameraControl.defaultProps = {\n  audio: false,\n  video: true,\n  style: {},\n  children: null\n}\n\nconst styles = {\n  preview: {\n    position: 'relative'\n  },\n  video: {\n    width: '100%',\n    height: '100%'\n  },\n  slider: {\n    display: 'flex',\n    position: 'absolute',\n    justifyContent: 'center',\n    zIndex: 1,\n    bottom: 0,\n    width: '100%'\n  }\n}\n\nexport default ReactCameraControl\n","import React, { Component } from 'react'\n\nimport ReactCameraControl from 'react-camera-control'\n\nexport default class App extends Component {\n  takePicture = async () => {\n    const blob = await this.camera.capture()\n    this.img.src = URL.createObjectURL(blob)\n    this.img.onload = () => {\n      URL.revokeObjectURL(this.src)\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <ReactCameraControl ref={cam => { this.camera = cam }} >\n          <div style={styles.captureContainer} onClick={this.takePicture}>\n            <div style={styles.captureButton} />\n          </div>\n        </ReactCameraControl>\n        <img\n          style={styles.captureImage}\n          ref={img => { this.img = img }}\n          alt='' />\n      </div>\n    )\n  }\n}\n\nconst styles = {\n  captureContainer: {\n    display: 'flex',\n    position: 'absolute',\n    justifyContent: 'center',\n    zIndex: 1,\n    bottom: 0,\n    width: '100%'\n  },\n  captureButton: {\n    backgroundColor: '#fff',\n    borderRadius: '50%',\n    height: 28,\n    width: 28,\n    color: '#000',\n    margin: 20\n  },\n  captureImage: {\n    width: '100%'\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}